var 星星 = "#fMap/MapHelper/weather/witch/3#";
var 彩虹 = "#fItem/Etc/0427/04270001/Icon9/0#";
/* ==================
脚本类型: NPC	    
脚本作者：TT111111   
联系方式qq：111111111111
=====================
*/
importPackage(java.util);
importPackage(Packages.client);
importPackage(Packages.server);
importPackage(Packages.tools);
importPackage(Packages.tools.packet);
importPackage(java.lang);
importPackage(Packages.server.quest);
importPackage(Packages.scripting);
importPackage(Packages.handling.channel);
importPackage(Packages.handling);
importPackage(Packages.handling.word);
importPackage(Packages.constants);
var status = 0;
var 感叹号 = "#fUI/UIWindow/Quest/icon0#";
var 美化new = "#fUI/UIWindow/Quest/icon5/1#";
var 圆形 = "#fUI/UIWindow/Quest/icon3/6#";
//var 蓝色角点 = "#fEffect/CharacterEff/1022223/4/0#";
var 蓝色角点 = "#fEffect/CharacterEff/1112915/0/0#";
var 红色箭头 = "#fUI/UIWindow/Quest/icon6/7#";
var 琴符 = "#fEffect/CharacterEff/1003252/0/0#";
var 音符 = "#fEffect/CharacterEff/1032063/0/0#";
var 花 = "#fUI/UIWindow.img/AriantMatch/characterIcon/0#";
var s = "#fUI/StatusBar/BtClaim/normal/0#";
var h = "#fUI/CashShop/CSEffect/effect/1#";
//var 小雪花 = "#fEffect/CharacterEff/1003393/0/0#";
var 花蘑菇 = "#fItem/Pet/5000046/change/1#";
var 萝卜 = "#fItem/Pet/5000048/angry/0#";
var 蓝色角点 = "#fUI/UIWindow.img/PvP/Scroll/enabled/next2#";
var 心 = "#fUI/GuildMark.img/Mark/Etc/00009001/14#";
var 爱心 = "#fEffect/CharacterEff/1022223/4/0#";
var 礼包物品 = "#v1302000#";
var add = "#fEffect/CharacterEff/1112903/0/0#"; //红桃心
var aaa = "#fUI/UIWindow.img/Quest/icon9/0#"; //红色右箭头
var zzz = "#fUI/UIWindow.img/Quest/icon8/0#"; //蓝色右箭头
var sss = "#fUI/UIWindow.img/QuestIcon/3/0#"; //选择道具
var 正方箭头 = "#fUI/Basic/BtHide3/mouseOver/0#";
var 感叹号 = "#fUI/UIWindow/Quest/icon0#";
var 美化new = "#fUI/UIWindow/Quest/icon5/1#";
var 红色箭头 = "#fEffect/CharacterEff/1112908/0/1#"; //彩光3
var ttt1 = "#fEffect/CharacterEff/1062114/1/0#"; //爱心
var 蓝色角点 = "#fUI/UIWindow.img/PvP/Scroll/enabled/next2#";
var 正方箭头 = "#fUI/Basic/BtHide3/mouseOver/0#";
var 爱心 = "#fEffect/CharacterEff/1022223/4/0#";
var 粉爱心 = "#fItem/Etc/0427/04270005/Icon8/1#"; //
var 菊花 = "#fUI/PredictHarmony/card/19#"; //卡片效果菊花
var 笑 = "#fUI/GuildBBS/GuildBBS/Emoticon/Basic/0#"; //笑脸
var 金枫叶 = "#fMap/MapHelper/weather/Maple/2#";
var 红枫叶 = "#fMap/MapHelper/weather/Maple/1#";
var 巫女 = "#fMap/MapHelper/weather/witch/0#"; //巫女
var 气球 = "#fMap/MapHelper/weather/balloon/4#"; //气球
var 射箭 = "#fMap/MapHelper/weather/LoveEffect2/4/0#"; //射箭
var 玫瑰 = "#fMap/MapHelper/weather/rose/0#"; //玫瑰花
var 烟花 = "#fMap/MapHelper/weather/squib/squib1/3#"; //烟花
var 黑水晶 = 4021008;
var 蓝色箭头 = "#fUI/UIWindow/Quest/icon2/7#";
var 红色箭头 = "#fUI/UIWindow/Quest/icon6/7#";
var 圆形 = "#fUI/UIWindow/Quest/icon3/6#";
var 美化new = "#fUI/UIWindow/Quest/icon5/1#";
var 感叹号 = "#fUI/UIWindow/Quest/icon0#";
var 正方箭头 = "#fUI/Basic/BtHide3/mouseOver/0#";
var 忠告 = "#k温馨提示：任何非法程序和外挂封号处理.封杀侥幸心理.";
var 彩虹 = "#fItem/Etc/0427/04270001/Icon9/0#";
var 中条猫 = "#fItem/Etc/0427/04270001/Icon9/0#";
var 猫右 = "#fItem/Etc/0427/04270001/Icon9/0#";
var 猫左 = "#fItem/Etc/0427/04270001/Icon9/0#";
var 幸运草 = "#fItem/Etc/0427/04270001/Icon9/0#";
var 香水 = "#fItem/Etc/0427/04270001/Icon9/0#";
var 皇冠 = "#fUI/UIWindow.img/UserInfo/bossPetCrown#";
var 开 = "#fUI/Basic/CheckBox/0#";   //有框框 无√
var 关 = "#fUI/Basic/CheckBox/1#";   //有框框 有√
var 金币图 = "#fUI/UIWindow/QuestIcon/7/0#";
var 圆圈 = "#fUI/UIWindow/Quest/icon3/0#";
var ll;
var mj;
var zl;
var yq;
var hp;
var mp;
var gj;
var mg;
var wf;
var mf;
var mz;
var hb;
var ys;
var ty;
var 强化物品 = 1112422;
var 材料物品 = 1112421;
var 物品数量 = 0;
var 成功率 = 100;
var 最高等级 = 80;
var 属性 = [4, 4, 4, 5, 4, 4, 4, 4, 4, 4];
var 攻魔a = [4, 4, 4, 5, 4, 4, 4, 4, 4, 4];
var 祝福数量 = 0;
var 枫叶数量 = 0;
var 暗影数量 = 0;
var 强化物品ivid = -1;
var 下一阶id = -1;
var 下一等级 = "";
var 等级规划 = [
  "", "等级0", "等级1", "等级2", "等级3", "等级4", "等级5", "等级6", "等级7", "等级8", "等级9", "等级10", "等级11", "等级12", "等级13", "等级14", "等级15", "等级16", "等级17"
];
var 进阶数据 = {
  "1002357": {
    "等级0": {
      "双攻": 8,
      "双防": 12,
      "材料": [
        [
          4001084,
          1
        ],
        [
          null,
          0
        ],
        [
          0,
          0
        ]
      ],
      "绑定材料": [
        4500019,
        null
      ]
    },
    "等级1": {
      "双攻": 8,
      "双防": 12,
      "材料": [
        [
          4001084,
          1
        ],
        [
          4000487,
          15
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级2": {
      "双攻": 16,
      "双防": 25,
      "材料": [
        [
          4001084,
          1
        ],
        [
          4000487,
          15
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级3": {
      "双攻": 25,
      "双防": 37,
      "材料": [
        [
          4001084,
          1
        ],
        [
          4000487,
          16
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级4": {
      "双攻": 33,
      "双防": 49,
      "材料": [
        [
          4001084,
          2
        ],
        [
          4000487,
          15
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级5": {
      "双攻": 41,
      "双防": 61,
      "材料": [
        [
          4001084,
          2
        ],
        [
          4000487,
          16
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级6": {
      "双攻": 49,
      "双防": 74,
      "材料": [
        [
          4001084,
          2
        ],
        [
          4000487,
          16
        ],
        [
          0,
          1577910
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级7": {
      "双攻": 57,
      "双防": 86,
      "材料": [
        [
          4001084,
          3
        ],
        [
          4000487,
          15
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级8": {
      "双攻": 66,
      "双防": 98,
      "材料": [
        [
          4001084,
          3
        ],
        [
          4000487,
          16
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级9": {
      "双攻": 74,
      "双防": 111,
      "材料": [
        [
          4001084,
          3
        ],
        [
          4000487,
          16
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级10": {
      "双攻": 82,
      "双防": 123,
      "材料": [
        [
          4001084,
          4
        ],
        [
          4000487,
          15
        ],
        [
          0,
          1577909
        ]
      ],
      "绑定材料": [
        4500019,
        4500034
      ]
    },
    "等级11": {
      "双攻": 91,
      "双防": 136,
      "材料": [
        [
          4001085,
          1
        ],
        [
          4000487,
          20
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级12": {
      "双攻": 100,
      "双防": 149,
      "材料": [
        [
          4001085,
          2
        ],
        [
          4000487,
          19
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级13": {
      "双攻": 109,
      "双防": 163,
      "材料": [
        [
          4001085,
          3
        ],
        [
          4000487,
          19
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级14": {
      "双攻": 117,
      "双防": 176,
      "材料": [
        [
          4001085,
          3
        ],
        [
          4000487,
          20
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级15": {
      "双攻": 126,
      "双防": 189,
      "材料": [
        [
          4001085,
          4
        ],
        [
          4000487,
          19
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级16": {
      "双攻": 135,
      "双防": 203,
      "材料": [
        [
          4001085,
          5
        ],
        [
          4000487,
          20
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级17": {
      "双攻": 144,
      "双防": 216,
      "材料": [
        [
          4001085,
          6
        ],
        [
          4000487,
          19
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级18": {
      "双攻": 153,
      "双防": 229,
      "材料": [
        [
          4001085,
          7
        ],
        [
          4000487,
          20
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级19": {
      "双攻": 162,
      "双防": 243,
      "材料": [
        [
          4001085,
          8
        ],
        [
          4000487,
          19
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级20": {
      "双攻": 171,
      "双防": 256,
      "材料": [
        [
          4001085,
          9
        ],
        [
          4000487,
          20
        ],
        [
          0,
          2129600
        ]
      ],
      "绑定材料": [
        4500020,
        4500034
      ]
    },
    "等级21": {
      "双攻": 181,
      "双防": 272,
      "材料": [
        [
          4500006,
          1
        ],
        [
          4000487,
          25
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级22": {
      "双攻": 192,
      "双防": 287,
      "材料": [
        [
          4500006,
          2
        ],
        [
          4000487,
          26
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级23": {
      "双攻": 202,
      "双防": 303,
      "材料": [
        [
          4500006,
          3
        ],
        [
          4000487,
          25
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级24": {
      "双攻": 213,
      "双防": 319,
      "材料": [
        [
          4500006,
          4
        ],
        [
          4000487,
          26
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级25": {
      "双攻": 223,
      "双防": 335,
      "材料": [
        [
          4500006,
          5
        ],
        [
          4000487,
          25
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级26": {
      "双攻": 233,
      "双防": 350,
      "材料": [
        [
          4500006,
          7
        ],
        [
          4000487,
          26
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级27": {
      "双攻": 244,
      "双防": 366,
      "材料": [
        [
          4500006,
          8
        ],
        [
          4000487,
          25
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级28": {
      "双攻": 254,
      "双防": 382,
      "材料": [
        [
          4500006,
          9
        ],
        [
          4000487,
          26
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级29": {
      "双攻": 265,
      "双防": 397,
      "材料": [
        [
          4500006,
          10
        ],
        [
          4000487,
          25
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级30": {
      "双攻": 275,
      "双防": 413,
      "材料": [
        [
          4500006,
          11
        ],
        [
          4000487,
          26
        ],
        [
          0,
          2928200
        ]
      ],
      "绑定材料": [
        4500021,
        4500034
      ]
    },
    "等级31": {
      "双攻": 290,
      "双防": 435,
      "材料": [
        [
          4500007,
          2
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级32": {
      "双攻": 305,
      "双防": 457,
      "材料": [
        [
          4500007,
          3
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级33": {
      "双攻": 319,
      "双防": 479,
      "材料": [
        [
          4500007,
          5
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级34": {
      "双攻": 334,
      "双防": 501,
      "材料": [
        [
          4500007,
          7
        ],
        [
          4000487,
          41
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级35": {
      "双攻": 349,
      "双防": 523,
      "材料": [
        [
          4500007,
          8
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级36": {
      "双攻": 364,
      "双防": 545,
      "材料": [
        [
          4500007,
          10
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级37": {
      "双攻": 378,
      "双防": 567,
      "材料": [
        [
          4500007,
          11
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级38": {
      "双攻": 393,
      "双防": 589,
      "材料": [
        [
          4500007,
          13
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级39": {
      "双攻": 408,
      "双防": 611,
      "材料": [
        [
          4500007,
          15
        ],
        [
          4000487,
          41
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级40": {
      "双攻": 422,
      "双防": 633,
      "材料": [
        [
          4500007,
          16
        ],
        [
          4000487,
          40
        ],
        [
          0,
          4831530
        ]
      ],
      "绑定材料": [
        4500022,
        4500034
      ]
    },
    "等级41": {
      "双攻": 436,
      "双防": 654,
      "材料": [
        [
          4500008,
          2
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级42": {
      "双攻": 450,
      "双防": 675,
      "材料": [
        [
          4500008,
          3
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级43": {
      "双攻": 464,
      "双防": 695,
      "材料": [
        [
          4500008,
          5
        ],
        [
          4000487,
          43
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级44": {
      "双攻": 477,
      "双防": 716,
      "材料": [
        [
          4500008,
          7
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级45": {
      "双攻": 491,
      "双防": 737,
      "材料": [
        [
          4500008,
          8
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级46": {
      "双攻": 505,
      "双防": 757,
      "材料": [
        [
          4500008,
          10
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级47": {
      "双攻": 518,
      "双防": 778,
      "材料": [
        [
          4500008,
          11
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级48": {
      "双攻": 532,
      "双防": 798,
      "材料": [
        [
          4500008,
          13
        ],
        [
          4000487,
          43
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级49": {
      "双攻": 546,
      "双防": 819,
      "材料": [
        [
          4500008,
          15
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级50": {
      "双攻": 560,
      "双防": 840,
      "材料": [
        [
          4500008,
          16
        ],
        [
          4000487,
          42
        ],
        [
          0,
          5314683
        ]
      ],
      "绑定材料": [
        4500023,
        4500034
      ]
    },
    "等级51": {
      "双攻": 577,
      "双防": 865,
      "材料": [
        [
          4500009,
          2
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794868
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级52": {
      "双攻": 594,
      "双防": 891,
      "材料": [
        [
          4500009,
          4
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794869
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级53": {
      "双攻": 611,
      "双防": 917,
      "材料": [
        [
          4500009,
          7
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794868
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级54": {
      "双攻": 629,
      "双防": 943,
      "材料": [
        [
          4500009,
          9
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794869
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级55": {
      "双攻": 646,
      "双防": 969,
      "材料": [
        [
          4500009,
          11
        ],
        [
          4000487,
          60
        ],
        [
          0,
          7794868
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级56": {
      "双攻": 663,
      "双防": 994,
      "材料": [
        [
          4500009,
          13
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794868
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级57": {
      "双攻": 680,
      "双防": 1020,
      "材料": [
        [
          4500009,
          15
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794869
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级58": {
      "双攻": 697,
      "双防": 1046,
      "材料": [
        [
          4500009,
          17
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794868
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级59": {
      "双攻": 715,
      "双防": 1072,
      "材料": [
        [
          4500009,
          20
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794869
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级60": {
      "双攻": 732,
      "双防": 1098,
      "材料": [
        [
          4500009,
          22
        ],
        [
          4000487,
          59
        ],
        [
          0,
          7794868
        ]
      ],
      "绑定材料": [
        4500024,
        4500034
      ]
    },
    "等级61": {
      "双攻": 748,
      "双防": 1122,
      "材料": [
        [
          4500010,
          2
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级62": {
      "双攻": 764,
      "双防": 1146,
      "材料": [
        [
          4500010,
          4
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级63": {
      "双攻": 780,
      "双防": 1171,
      "材料": [
        [
          4500010,
          7
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574356
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级64": {
      "双攻": 797,
      "双防": 1195,
      "材料": [
        [
          4500010,
          9
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级65": {
      "双攻": 813,
      "双防": 1220,
      "材料": [
        [
          4500010,
          11
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级66": {
      "双攻": 829,
      "双防": 1244,
      "材料": [
        [
          4500010,
          13
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级67": {
      "双攻": 846,
      "双防": 1268,
      "材料": [
        [
          4500010,
          15
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574356
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级68": {
      "双攻": 862,
      "双防": 1293,
      "材料": [
        [
          4500010,
          17
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级69": {
      "双攻": 878,
      "双防": 1317,
      "材料": [
        [
          4500010,
          20
        ],
        [
          4000487,
          62
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级70": {
      "双攻": 894,
      "双防": 1341,
      "材料": [
        [
          4500010,
          22
        ],
        [
          4000487,
          63
        ],
        [
          0,
          8574355
        ]
      ],
      "绑定材料": [
        4500025,
        4500034
      ]
    },
    "等级71": {
      "双攻": 910,
      "双防": 1365,
      "材料": [
        [
          4500011,
          2
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级72": {
      "双攻": 925,
      "双防": 1388,
      "材料": [
        [
          4500011,
          4
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级73": {
      "双攻": 941,
      "双防": 1411,
      "材料": [
        [
          4500011,
          7
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级74": {
      "双攻": 957,
      "双防": 1435,
      "材料": [
        [
          4500011,
          9
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431790
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级75": {
      "双攻": 972,
      "双防": 1458,
      "材料": [
        [
          4500011,
          11
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级76": {
      "双攻": 988,
      "双防": 1481,
      "材料": [
        [
          4500011,
          13
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级77": {
      "双攻": 1003,
      "双防": 1505,
      "材料": [
        [
          4500011,
          15
        ],
        [
          4000487,
          66
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级78": {
      "双攻": 1019,
      "双防": 1528,
      "材料": [
        [
          4500011,
          17
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431790
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级79": {
      "双攻": 1034,
      "双防": 1551,
      "材料": [
        [
          4500011,
          20
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级80": {
      "双攻": 1050,
      "双防": 1575,
      "材料": [
        [
          4500011,
          22
        ],
        [
          4000487,
          65
        ],
        [
          0,
          9431791
        ]
      ],
      "绑定材料": [
        4500026,
        4500034
      ]
    },
    "等级81": {
      "双攻": 1068,
      "双防": 1603,
      "材料": [
        [
          4500012,
          3
        ],
        [
          4000487,
          86
        ],
        [
          0,
          12968712
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级82": {
      "双攻": 1087,
      "双防": 1631,
      "材料": [
        [
          4500012,
          5
        ],
        [
          4000487,
          85
        ],
        [
          0,
          12968713
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级83": {
      "双攻": 1106,
      "双防": 1659,
      "材料": [
        [
          4500012,
          8
        ],
        [
          4000487,
          86
        ],
        [
          0,
          12968712
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级84": {
      "双攻": 1125,
      "双防": 1687,
      "材料": [
        [
          4500012,
          11
        ],
        [
          4000487,
          85
        ],
        [
          0,
          12968712
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级85": {
      "双攻": 1143,
      "双防": 1715,
      "材料": [
        [
          4500012,
          14
        ],
        [
          4000487,
          86
        ],
        [
          0,
          12968712
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级86": {
      "双攻": 1162,
      "双防": 1743,
      "材料": [
        [
          4500012,
          16
        ],
        [
          4000487,
          85
        ],
        [
          0,
          12968713
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级87": {
      "双攻": 1181,
      "双防": 1771,
      "材料": [
        [
          4500012,
          19
        ],
        [
          4000487,
          86
        ],
        [
          0,
          12968712
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级88": {
      "双攻": 1199,
      "双防": 1799,
      "材料": [
        [
          4500012,
          22
        ],
        [
          4000487,
          85
        ],
        [
          0,
          12968712
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级89": {
      "双攻": 1218,
      "双防": 1827,
      "材料": [
        [
          4500012,
          25
        ],
        [
          4000487,
          86
        ],
        [
          0,
          12968713
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级90": {
      "双攻": 1237,
      "双防": 1855,
      "材料": [
        [
          4500012,
          27
        ],
        [
          4000487,
          85
        ],
        [
          0,
          12968712
        ]
      ],
      "绑定材料": [
        4500027,
        4500034
      ]
    },
    "等级91": {
      "双攻": 1255,
      "双防": 1882,
      "材料": [
        [
          4500013,
          3
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265583
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级92": {
      "双攻": 1273,
      "双防": 1909,
      "材料": [
        [
          4500013,
          5
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265584
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级93": {
      "双攻": 1291,
      "双防": 1936,
      "材料": [
        [
          4500013,
          8
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265584
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级94": {
      "双攻": 1309,
      "双防": 1963,
      "材料": [
        [
          4500013,
          11
        ],
        [
          4000487,
          89
        ],
        [
          0,
          14265583
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级95": {
      "双攻": 1327,
      "双防": 1990,
      "材料": [
        [
          4500013,
          14
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265584
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级96": {
      "双攻": 1345,
      "双防": 2017,
      "材料": [
        [
          4500013,
          16
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265583
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级97": {
      "双攻": 1363,
      "双防": 2044,
      "材料": [
        [
          4500013,
          19
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265584
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级98": {
      "双攻": 1381,
      "双防": 2071,
      "材料": [
        [
          4500013,
          22
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265583
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级99": {
      "双攻": 1399,
      "双防": 2098,
      "材料": [
        [
          4500013,
          25
        ],
        [
          4000487,
          89
        ],
        [
          0,
          14265584
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级100": {
      "双攻": 1417,
      "双防": 2126,
      "材料": [
        [
          4500013,
          27
        ],
        [
          4000487,
          90
        ],
        [
          0,
          14265583
        ]
      ],
      "绑定材料": [
        4500028,
        4500034
      ]
    },
    "等级101": {
      "双攻": 1435,
      "双防": 2152,
      "材料": [
        [
          4500014,
          3
        ],
        [
          4000487,
          94
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级102": {
      "双攻": 1452,
      "双防": 2178,
      "材料": [
        [
          4500014,
          5
        ],
        [
          4000487,
          95
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级103": {
      "双攻": 1470,
      "双防": 2205,
      "材料": [
        [
          4500014,
          8
        ],
        [
          4000487,
          94
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级104": {
      "双攻": 1487,
      "双防": 2231,
      "材料": [
        [
          4500014,
          11
        ],
        [
          4000487,
          94
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级105": {
      "双攻": 1505,
      "双防": 2257,
      "材料": [
        [
          4500014,
          14
        ],
        [
          4000487,
          95
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级106": {
      "双攻": 1522,
      "双防": 2284,
      "材料": [
        [
          4500014,
          16
        ],
        [
          4000487,
          94
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级107": {
      "双攻": 1540,
      "双防": 2310,
      "材料": [
        [
          4500014,
          19
        ],
        [
          4000487,
          94
        ],
        [
          0,
          15692141
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级108": {
      "双攻": 1557,
      "双防": 2336,
      "材料": [
        [
          4500014,
          22
        ],
        [
          4000487,
          94
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级109": {
      "双攻": 1575,
      "双防": 2363,
      "材料": [
        [
          4500014,
          25
        ],
        [
          4000487,
          95
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级110": {
      "双攻": 1593,
      "双防": 2389,
      "材料": [
        [
          4500014,
          27
        ],
        [
          4000487,
          94
        ],
        [
          0,
          15692142
        ]
      ],
      "绑定材料": [
        4500029,
        4500034
      ]
    },
    "等级111": {
      "双攻": 1613,
      "双防": 2420,
      "材料": [
        [
          4500015,
          3
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713627
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级112": {
      "双攻": 1634,
      "双防": 2451,
      "材料": [
        [
          4500015,
          7
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713628
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级113": {
      "双攻": 1654,
      "双防": 2481,
      "材料": [
        [
          4500015,
          10
        ],
        [
          4000487,
          118
        ],
        [
          0,
          20713627
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级114": {
      "双攻": 1675,
      "双防": 2512,
      "材料": [
        [
          4500015,
          13
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713627
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级115": {
      "双攻": 1695,
      "双防": 2543,
      "材料": [
        [
          4500015,
          16
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713628
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级116": {
      "双攻": 1716,
      "双防": 2574,
      "材料": [
        [
          4500015,
          20
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713627
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级117": {
      "双攻": 1737,
      "双防": 2605,
      "材料": [
        [
          4500015,
          23
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713627
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级118": {
      "双攻": 1757,
      "双防": 2636,
      "材料": [
        [
          4500015,
          26
        ],
        [
          4000487,
          118
        ],
        [
          0,
          20713627
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级119": {
      "双攻": 1778,
      "双防": 2667,
      "材料": [
        [
          4500015,
          29
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713628
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级120": {
      "双攻": 1798,
      "双防": 2697,
      "材料": [
        [
          4500015,
          33
        ],
        [
          4000487,
          119
        ],
        [
          0,
          20713627
        ]
      ],
      "绑定材料": [
        4500030,
        4500034
      ]
    },
    "等级121": {
      "双攻": 1818,
      "双防": 2728,
      "材料": [
        [
          4500016,
          3
        ],
        [
          4000487,
          125
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级122": {
      "双攻": 1839,
      "双防": 2758,
      "材料": [
        [
          4500016,
          7
        ],
        [
          4000487,
          124
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级123": {
      "双攻": 1859,
      "双防": 2788,
      "材料": [
        [
          4500016,
          10
        ],
        [
          4000487,
          125
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级124": {
      "双攻": 1879,
      "双防": 2818,
      "材料": [
        [
          4500016,
          13
        ],
        [
          4000487,
          125
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级125": {
      "双攻": 1899,
      "双防": 2849,
      "材料": [
        [
          4500016,
          16
        ],
        [
          4000487,
          125
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级126": {
      "双攻": 1919,
      "双防": 2879,
      "材料": [
        [
          4500016,
          20
        ],
        [
          4000487,
          124
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级127": {
      "双攻": 1939,
      "双防": 2909,
      "材料": [
        [
          4500016,
          23
        ],
        [
          4000487,
          125
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级128": {
      "双攻": 1960,
      "双防": 2939,
      "材料": [
        [
          4500016,
          26
        ],
        [
          4000487,
          125
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级129": {
      "双攻": 1980,
      "双防": 2970,
      "材料": [
        [
          4500016,
          29
        ],
        [
          4000487,
          125
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    },
    "等级130": {
      "双攻": 2000,
      "双防": 3000,
      "材料": [
        [
          4500016,
          33
        ],
        [
          4000487,
          124
        ],
        [
          0,
          22784990
        ]
      ],
      "绑定材料": [
        4500031,
        4500034
      ]
    }
  }
};
var sels;
var status = -1;
var 当前星级 = -1;
var 小黄星 = "#fItem/Etc/0427/04270001/Icon9/0#";

function start() {

  action(1, 0, 0);
}



function action(mode, type, selection) {

  if (cm.getInventory(1).getItem(1) == null) {
    cm.sendOk("装备栏第一格没有装备");
    cm.dispose();
    return;
  }
  强化物品 = cm.getInventory(1).getItem(1).getItemId();
  if (!进阶数据[强化物品]) {
    cm.sendOk("请把要强化放在装备栏第一格");
    cm.dispose();
    return;
  }
  var itemaa = cm.getInventory(1).getItem(1).copy();
  // 强化物品ivid = itemaa.getInventoryId();
  // // 获取当前等级

  var currentLevel = "等级0";
  if (itemaa.getOwner() != null && itemaa.getOwner() != "") {
    currentLevel = itemaa.getOwner();
  }
  // 获取当前等级数字
  当前星级 = parseInt(currentLevel.replace("等级", ""));
  if (当前星级 < 0 || 当前星级 > 80) {
    cm.sendOk("未知错误00001，请联系管理员。");
    cm.dispose();
    return;
  }
  下一星级 = 当前星级 + 1;
  当前等级 = "等级" + 当前星级;
  下一等级 = "等级" + (当前星级 + 1);
  // cm.sendOk(下一星级+下一等级);
  // cm.dispose();
  // return;
  // // 检查是否达到最高等级
  if (当前星级 >= 80) {
    cm.sendOk("该装备已到达最高等级，无法继续升级。");
    cm.dispose();
    return;
  }


  if (mode == 1) {
    status++;
  } else if (mode == 0) {
    status--;
  } else {
    cm.dispose();
    return;
  }
  if (status == 0) {

    var text = "";
    text += "#k┏━━" + 小黄星 + "━━━┫ 欢迎来到冒险岛 ┣━━━" + 小黄星 + "━━┓#k\r\n\r\n";
    text += "  " + 感叹号 + "[#v" + 强化物品 + "#][#t" + 强化物品 + "#]#b(最多Lv" + 最高等级 + ")#k#n\r\n";
    text += "  " + 感叹号 + "当前强化是 #b#e" + 当前等级 + "#k#n 强化至 #b#e" + 下一等级 + "#k#n\r\n";
    text += "  " + 感叹号 + "强化后属性：";
    text += 进阶数据[强化物品][下一等级]["hpmp"] ? "[#rHP+" + 进阶数据[强化物品][下一等级]["hpmp"] + "]" : "";
    text += 进阶数据[强化物品][下一等级]["hpmp"] ? "[#rMP+" + 进阶数据[强化物品][下一等级]["hpmp"] + "]" : "";
    text += 进阶数据[强化物品][下一等级]["四维"] ? "[#r四维+" + (进阶数据[强化物品][下一等级]["四维"] + 15) + "]" : "";
    text += 进阶数据[强化物品][下一等级]["双攻"] ? "[#r双攻+" + (进阶数据[强化物品][下一等级]["双攻"] + 20) + "]" : "";
    text += 进阶数据[强化物品][下一等级]["双防"] ? "[#r双防+" + (进阶数据[强化物品][下一等级]["双防"] + 32) + "]" : "";
    text += 进阶数据[强化物品][下一等级]["速度"] ? "[#r速度+" + 进阶数据[强化物品][下一等级]["速度"] + "]" : "";
    text += 进阶数据[强化物品][下一等级]["跳跃"] ? "[#r跳跃+" + 进阶数据[强化物品][下一等级]["跳跃"] + "]" : "";
    text += 进阶数据[强化物品][下一等级]["命中"] ? "[#r命中+" + 进阶数据[强化物品][下一等级]["命中"] + "]" : "";
    text += 进阶数据[强化物品][下一等级]["回避"] ? "[#r回避+" + 进阶数据[强化物品][下一等级]["回避"] + "]" : "";

    text += "#b#k\r\n";
    text += "  " + 感叹号 + "进行强化的放到 [装备栏] 第#r#e1#k#n格#b#k\r\n";
    text += "  " + 感叹号 + "进行强化需要以下材料：#k\r\n";
    text += "  #b#e----------------------------------------#n#k\r\n";
    // cm.sendOk(强化物品 + "," + 当前星级);
    // cm.dispose();
    // return;

    var 进阶需要材料 = 进阶数据[强化物品][下一等级]["材料"];
    var 进阶需要绑定材料 = 进阶数据[强化物品][下一等级]["绑定材料"];
    var 材料齐全 = true;
    for (var i = 0; i < 进阶需要材料.length; i++) {//判定材料扣除材料
      var 背包绑定物品数量 = 0;
      var 需要物品数量 = 进阶需要材料[i][1];
      var 需要物品id = 进阶需要材料[i][0];
      var 绑定物品id = -1;
      if (进阶需要绑定材料[i]) {
        绑定物品id = 进阶需要绑定材料[i];
        背包绑定物品数量 = cm.itemQuantity(绑定物品id);
      }
      var 背包非绑定物品数量 = cm.itemQuantity(需要物品id);
      if (需要物品id > 0) {
        if (背包绑定物品数量 + 背包非绑定物品数量 < 需要物品数量) {
          材料齐全 = false;
          cm.setBossLog("需要物品id", 需要物品id, true);
        }
        text += "   " + 圆形 + "需要#v" + 需要物品id + "# #k[#r " + 需要物品数量 + " #k/ " + (背包绑定物品数量 + 背包非绑定物品数量) + " ] " + ((背包绑定物品数量 + 背包非绑定物品数量) >= 需要物品数量 ? "" + 关 + "#g#e满足#k#n" : "" + 开 + "#r#e不足#k#n") + "#d优先扣除绑定材料#k#n\r\n"
      } else if (需要物品id == 0) {
        if (cm.getPlayer().getMeso() < 需要物品数量) {
          材料齐全 = false;
        }
        text += "   " + 圆形 + "需要#v2140002# #k[#r " + 需要物品数量 + " #k/ " + cm.getPlayer().getMeso() + " ] " + (cm.getPlayer().getMeso() >= 需要物品数量 ? "" + 关 + "#g#e满足#k#n" : "" + 开 + "#r#e不足#k#n") + "#d#k#n\r\n"
      }
    }
    text += "  #b#e----------------------------------------#n#k\r\n"
    if (材料齐全) {
      text += "  #L1#" + zzz + "#b开始强化#l";
    } else {
      text += "   #L2#" + aaa + "#r获取所需材料#l#n#k\r\n"
    }
    //text += "  #L1#" + zzz + "#b开始强化#l      #L2#" + aaa + "#r获取所需材料#l#n#k\r\n"
    cm.sendSimple(text);
  } else if (status == 1) {
    sels = selection;
    if (selection == 1) {
      cm.sendSimple("#b是否要强化#r#r #i" + 强化物品 + "#? \r\n");
    } else if (selection == 2) {
      if (sels == 2) {
        // cm.sendOk(cm.getBossLog("需要物品id") + "获取材料");
        // cm.dispose();
        // return;
        var 需要物品id = cm.getBossLog("需要物品id");
        // cm.sendSimple(需要物品id);
        if (需要物品id == 4500033 || 需要物品id == 4000313) {
          cm.dispose();
          cm.openNpc(9130000, "黄金枫叶礼包");
          return;
        }
        if (需要物品id == 4001084 ||
          需要物品id == 4001085 ||
          需要物品id == 4500006 ||
          需要物品id == 4500007 ||
          需要物品id == 4500008 ||
          需要物品id == 4500009 ||
          需要物品id == 4500010 ||
          需要物品id == 4500011 ||
          需要物品id == 4500012 ||
          需要物品id == 4500013 ||
          需要物品id == 4500014 ||
          需要物品id == 4500015 ||
          需要物品id == 4500016) {
          cm.dispose();
          cm.openNpc(9130000, "BOSS材料礼包");
        }
        if (需要物品id == 4170005 || 需要物品id == 4500005) {
          cm.dispose();
          cm.openNpc(2013000, 0);
          return;
        }
      }
    }

  } else if (status == 2) {
    if (当前星级 >= 最高等级) {
      var itemab = cm.getInventory(1).getItem(1).copy();
      if (itemab.getMatk() != 16 || !下一阶id || 进阶数据[下一阶id]) {
        cm.sendOk("此装备无法进阶");
        cm.dispose();
        return;
      }
      if (!deleteitem(下一阶id, 下一等级)) {
        cm.sendOk("材料不足");
        cm.dispose();
        return;
      }
      if (!cm.removeFromSlot(1, 1, 1, 强化物品)) {
        cm.sendOk("进阶异常，请重试！！");
        cm.dispose();
        return;
      }
      var equip = cm.getEquip(强化物品);
      equip.setStr(15);
      equip.setDex(15);
      equip.setInt(15);
      equip.setLuk(15);
      // equip.setHp(37 + 进阶数据[强化物品][下一等级]["hpmp"]);
      // equip.setMp(60 + 进阶数据[强化物品][下一等级]["hpmp"]);
      equip.setWatk(20 + 进阶数据[强化物品][下一等级]["双攻"]);
      equip.setMatk(20 + 进阶数据[强化物品][下一等级]["双攻"]);
      equip.setWdef(32 + 进阶数据[强化物品][下一等级]["双防"]);
      equip.setMdef(32 + 进阶数据[强化物品][下一等级]["双防"]);
      // equip.setAvoid(6 + 进阶数据[强化物品][下一等级]["回避"]);
      // equip.setAcc(9 + 进阶数据[强化物品][下一等级]["命中"]);
      equip.setOwner(下一等级);
      cm.addFromDrop(equip, true);
      cm.dispose();
      return;

    } else {
      if (!deleteitem(强化物品, 下一等级)) {
        cm.sendOk("材料不足");
        cm.dispose();
        return;
      }
      if (cm.随机数(100) <= 成功率) {
        var statup = new java.util.ArrayList();
        var item = cm.getInventory(1).getItem(1).copy();
        item.setStr(15);
        item.setDex(15);
        item.setInt(15);
        item.setLuk(15);
        // item.setHp(37 + 进阶数据[强化物品][下一等级]["hpmp"]);
        // item.setMp(60 + 进阶数据[强化物品][下一等级]["hpmp"]);
        item.setWatk(20 + 进阶数据[强化物品][下一等级]["双攻"]);
        item.setMatk(20 + 进阶数据[强化物品][下一等级]["双攻"]);
        item.setWdef(32 + 进阶数据[强化物品][下一等级]["双防"]);
        item.setMdef(32 + 进阶数据[强化物品][下一等级]["双防"]);
        // item.setAvoid(6 + 进阶数据[强化物品][下一等级]["回避"]);
        // item.setAcc(9 + 进阶数据[强化物品][下一等级]["命中"]);
        item.setOwner(下一等级);
        Packages.server.MapleInventoryManipulator.removeFromSlot(cm.getC(), Packages.client.inventory.MapleInventoryType.EQUIP, 1, 1, false);
        Packages.server.MapleInventoryManipulator.addFromDrop(cm.getC(), item, false);
        //cm.itemlaba("『戒指强化』", "玩家 [" + cm.getPlayer().getName() + "] 强化 "+等级规划[(当前星级+1)]+"成功", item, 15);
        cm.sendNext("强化成功");
        status = -1;

      } else {
        cm.sendNext("强化失败");
        status = -1;
      }
    }

  } else {
    //cm.sendNext("#r发生错误: mode : " + mode + " status : " + status);
    cm.dispose();
  }
}


function deleteitem(新物品id, 新等级) {
  var 进阶需要材料 = 进阶数据[新物品id][新等级]["材料"];
  var 进阶需要绑定材料 = 进阶数据[新物品id][新等级]["绑定材料"];
  for (var i = 0; i < 进阶需要材料.length; i++) {//判定材料扣除材料
    var 背包绑定物品数量 = 0;
    var 需要物品数量 = 进阶需要材料[i][1];
    var 需要物品id = 进阶需要材料[i][0];
    var 绑定物品id = -1;
    if (进阶需要绑定材料[i]) {
      绑定物品id = 进阶需要绑定材料[i];
      背包绑定物品数量 = cm.itemQuantity(绑定物品id);
    }
    var 背包非绑定物品数量 = cm.itemQuantity(需要物品id);
    if (需要物品id > 0) {
      if (背包绑定物品数量 + 背包非绑定物品数量 < 需要物品数量) {
        return false;
      } else {
        if (背包绑定物品数量 >= 需要物品数量) {
          cm.gainItem(绑定物品id, -需要物品数量);
        } else {
          cm.gainItem(绑定物品id, -背包绑定物品数量);
          cm.gainItem(需要物品id, 背包绑定物品数量 - 需要物品数量);
        }
      }
    } else if (需要物品id == 0) {
      if (cm.getPlayer().getMeso() < 需要物品数量) {
        return false;
      }
      cm.gainMeso(-需要物品数量);
    }
  }
  return true;
}